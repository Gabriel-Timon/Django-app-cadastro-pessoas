{% extends 'pessoas/base.html' %}
{% block content %}
  <div class="glass-panel p-4 p-md-5">
    <div class="d-flex flex-column flex-md-row justify-content-between gap-2 mb-3">
      <div>
        <h1 class="h3 mb-1">{{ page_title }}</h1>
        <div class="text-white-50">Selecione um mês para filtrar aniversariantes.</div>
      </div>
      <a class="btn btn-outline-light" href="{% url 'pessoas:menu_filtros' %}">
        <i class="bi bi-arrow-left me-1"></i>Voltar ao menu de filtros
      </a>
    </div>

    <form method="post" class="row g-3 align-items-end mb-3">
      {% csrf_token %}
      <div class="col-md-6">
        <label class="form-label">Qual mês deseja pesquisar?</label>
        {{ form.mes }}
      </div>
      <div class="col-md-3">
        <button class="btn btn-light w-100" type="submit"><i class="bi bi-search me-1"></i>Pesquisar</button>
      </div>
    </form>

    {% if pessoas is not None %}
      {% if pessoas %}
        <div class="table-responsive">
          <table class="table table-dark table-hover align-middle mb-0">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Sobrenome</th>
                <th>Idade</th>
                <th>CPF</th>
                <th>Nascimento</th>
                <th class="text-end">Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for p in pessoas %}
                <tr>
                  <td class="fw-semibold">{{ p.nome }}</td>
                  <td>{{ p.sobrenome }}</td>
                  <td>{{ p.idade }}</td>
                  <td class="font-mono">{{ p.cpf_formatado }}</td>
                  <td>{{ p.data_nascimento|date:"d/m/Y" }}</td>
                  <td class="text-end">
                    <a class="btn btn-sm btn-outline-light" href="{% url 'pessoas:pessoa_detail' p.pk %}"><i class="bi bi-eye"></i></a>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <div class="text-white-50">Nenhum aniversariante encontrado para o mês selecionado.</div>
      {% endif %}
    {% endif %}
  </div>
{% endblock %}
